YUI.add("hermes-lang-gallery_de-de",(function(e,a){e.Intl.add("hermes/gallery","de-DE",{VIEW_YOUR_GALLERIES:[{type:0,value:"Deine Galerien anzeigen"}],GALLERIES_WITH_YOUR_ITEMS:[{type:0,value:"Galerien mit deinen Elementen"}],GALLERY_CURATED_BY:[{type:0,value:'eine von <a href="'},{type:1,value:"ownerUrl"},{type:0,value:'">'},{type:1,value:"ownerName"},{type:0,value:"</a> bearbeitete Galerie"}],GALLERY_CURATED_BY_YOU:[{type:0,value:'eine von <a href="'},{type:1,value:"ownerUrl"},{type:0,value:'">DIR</a> bearbeitete Galerie'}],PRIVATE_GALLERY_CURATED_BY:[{type:0,value:'eine von <a href="'},{type:1,value:"ownerUrl"},{type:0,value:'">'},{type:1,value:"ownerName"},{type:0,value:"</a> bearbeitete private Galerie"}],YOU_ATTRIBUTION:[{type:0,value:"DU!"}],DESCRIPTION_READ_MORE:[{type:0,value:"weiterlesen"}],DESCRIPTION_READ_LESS:[{type:0,value:"weniger Infos"}],BACK_TO_GALLERIES_LIST:[{type:0,value:"Zurück zur Galerieliste"}],ADD_COMMENT:[{type:0,value:"Kommentar hinzufügen"}],EDIT_GALLERY:[{type:0,value:"Galerie bearbeiten"}],ADD_A_TITLE:[{type:0,value:"Titel hinzufügen"}],ADD_A_DESCRIPTION:[{type:0,value:"Beschreibung hinzufügen"}],COVER_PHOTO:[{type:0,value:"Titelbild"}],CHOOSE_A_COVER_PHOTO:[{type:0,value:"Titelbild auswählen"}],CHANGE_COVER_PHOTO:[{type:0,value:"Titelbild ändern"}],PRIVATE_GALLERY:[{type:0,value:"Private Galerie"}],DELETE_GALLERY:[{type:0,value:"Galerie löschen"}],GALLERY_CONFIRM_DELETE_MESSAGE:[{type:0,value:"Möchtest du diese Galerie wirklich löschen?"}],MAKE_GALLERY_PUBLIC:[{type:0,value:"Diese Galerie öffentlich machen?"}],GALLERY_PUBLIC_EXPLANATION:[{type:0,value:"Diese Galerie wird für andere sichtbar sein, und es werden Benachrichtigungen versendet, wenn du Fotos hinzufügst."}],LARGE_VIEW_LAYOUT_TITLE:[{type:0,value:"Großansicht"}],REORDER_PHOTOS_LAYOUT_TITLE:[{type:0,value:"Fotos neu anordnen"}],GALLERY_PHOTO_REMOVE_MESSAGE:[{type:0,value:"Dieses Foto wird aus der Galerie entfernt."}],GALLERY_PHOTO_REMOVE_TITLE:[{type:0,value:"Dieses Foto aus der Galerie entfernen?"}],PHOTO_REMOVED:[{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"Foto"}]},video:{value:[{type:0,value:"Video"}]},other:{value:[{type:0,value:"Foto"}]}}},{type:0,value:" entfernt"}],REMOVE_FROM_GALLERY:[{type:0,value:"Aus Galerie entfernen"}],GALLERY_REMARK_OWNER_SAYS:[{type:1,value:"ownerName"},{type:0,value:" sagt:"}],GALLERY_REMARK_WHY:[{type:0,value:"Warum hast du dieses "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"Foto"}]},video:{value:[{type:0,value:"Video"}]},other:{value:[{type:0,value:"Foto"}]}}},{type:0,value:" ausgewählt?"}],IN_THIS_GALLERY:[{type:0,value:"In dieser Galerie:"}],AND_COUNT_MORE:[{type:0,value:"und "},{type:1,value:"count"},{type:0,value:" weitere"}],NEW_GALLERY:[{type:0,value:"Neue Galerie"}],NOTHING_HERE_YET:[{type:0,value:"Noch keine Fotos."}],NOTHING_HERE_YET_DETAILS:[{type:0,value:"Du kannst ein Foto oder Video von seiner Detailseite aus in einer Galerie speichern oder hier aus deinen Favoriten auswählen."}],ADD_PHOTOS_AND_VIDEOS:[{type:0,value:"Fotos und Videos hinzufügen"}],REMOVING:[{type:0,value:"Wird entfernt ..."}],ARE_YOU_SURE_REMOVE_PHOTO:[{type:0,value:"Möchtest du dieses "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"Foto"}]},video:{value:[{type:0,value:"Video"}]},other:{value:[{type:0,value:"Foto"}]}}},{type:0,value:" wirklich entfernen?"}],ARE_YOU_SURE_REMOVE_VIDEO:[{type:0,value:"Dieses Video wirklich entfernen?"}],GALLERY_ADD:[{type:0,value:"Hinzufügen"}],GALLERY_CHOOSE_PHOTOS_LIMIT:[{type:6,value:"limit",options:{one:{value:[{type:0,value:"Maximal "},{type:7},{type:0,value:" weiteres Foto für Galerie auswählen."}]},other:{value:[{type:0,value:"Maximal "},{type:7},{type:0,value:" weitere Fotos für Galerie auswählen."}]}},offset:0,pluralType:"cardinal"}],GALLERY_FULL_CANT_ADD:[{type:0,value:"Deine Galerie ist voll! Du musst zuerst ein paar Fotos entfernen, um neue hinzufügen zu können."}],GALLERY_EDIT_REMARK_TOOLTIP:[{type:0,value:"Anmerkung bearbeiten"}],GALLERY_VIEW_REMARK_TOOLTIP:[{type:0,value:"Anmerkung anzeigen"}],GALLERY_FEATURED_BANNER_MESSAGE:[{type:0,value:'Das sind die neuen Flickr-Galerien. <a href="'},{type:1,value:"learnUrl"},{type:0,value:'" class="learn-more-link">Weitere Informationen</a>. <a href="'},{type:1,value:"feedbackUrl"},{type:0,value:'" class="feedback-link">Feedback teilen</a>.'}],GALLERY_FEATURED_TITLE:[{type:0,value:"Neue Galerien"}],GALLERY_FEATURED_DESCRIPTION:[{type:0,value:"Jetzt mit mehr Funktionen und bis zu 500 Fotos."}],GALLERY_FEATURED_LEARN_MORE:[{type:0,value:"Weitere Informationen"}],GALLERY_FEATURED_SUBMIT_FEEDBACK:[{type:0,value:"Feedback abgeben"}],PHOTO_CANT_ADD_TO_GALLERY:[{type:0,value:"Dieses "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"Foto"}]},video:{value:[{type:0,value:"Video"}]},other:{value:[{type:0,value:"Foto"}]}}},{type:0,value:" kann nicht zur Galerie hinzugefügt werden."}],PHOTO_ALREADY_IN_GALLERY:[{type:0,value:"Dieses "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"Foto"}]},video:{value:[{type:0,value:"Video"}]},other:{value:[{type:0,value:"Foto"}]}}},{type:0,value:" ist bereits in der Galerie vorhanden."}],USER_HASNT_CREATED_GALLERIES:[{type:1,value:"ownerName"},{type:0,value:" hat noch keine Galerien erstellt."}],GALLERIES_COUNT:[{type:6,value:"count",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" Galerie"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" Galerien"}]}},offset:0,pluralType:"cardinal"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-stats_de-de",(function(e,t){e.Intl.add("hermes/stats","de-DE",{STATS:[{type:0,value:"Statistiken"}],NUMBER:[{type:2,value:"num",style:null}],NUMBER_VIEWS:[{type:2,value:"num",style:null},{type:0,value:" Aufrufe"}],NUMBER_FAVES:[{type:2,value:"num",style:null},{type:0,value:" Favoriten"}],NUMBER_COMMENTS:[{type:2,value:"num",style:null},{type:0,value:" Kommentare"}],VIEW_COUNTS:[{type:0,value:"Anzahl der Aufrufe"}],SO_FAR_TODAY:[{type:0,value:"Heute"}],SO_FAR_TODAY_DOT_DOT_DOT:[{type:0,value:"Heute..."}],YESTERDAY:[{type:0,value:"Gestern"}],ALL_TIME:[{type:0,value:"Gesamt"}],PHOTOS_AND_VIDEOS:[{type:0,value:"Fotos und Videos"}],PHOTOS:[{type:0,value:"Fotos"}],VIDEOS:[{type:0,value:"Videos"}],PHOTOSTREAM:[{type:0,value:"Fotostream"}],ALBUMS:[{type:0,value:"Alben"}],COLLECTIONS:[{type:0,value:"Sammlungen"}],GALLERIES:[{type:0,value:"Galerien"}],TOTAL:[{type:0,value:"Gesamt"}],TOP_PHOTOS_AND_VIDEOS:[{type:0,value:"Top-Fotos und -Videos"}],CONTENT_BREAKDOWN:[{type:0,value:"Inhaltsübersicht <span>("},{type:2,value:"num",style:null},{type:0,value:" Elemente)</span>"}],VIEWS:[{type:0,value:"Aufrufe"}],ALL_TIME_VIEWS:[{type:0,value:"Aufrufe insgesamt"}],ALL_TIME_FAVES:[{type:0,value:"Favoriten aller Zeiträume"}],ALL_TIME_COMMENTS:[{type:0,value:"Kommentare aller Zeiträume"}],DATE:[{type:0,value:"Datum"}],INTERESTINGNESS:[{type:0,value:"Interessantheit"}],FAVORITES:[{type:0,value:"Favoriten"}],COMMENTS:[{type:0,value:"Kommentare"}],RECENT_VIEWS:[{type:0,value:"Letzte Aufrufe"}],RECENT_FAVES:[{type:0,value:"Letzte Favoriten"}],RECENT_COMMENTS:[{type:0,value:"Letzte Kommentare"}],BACK_TO_STATS:[{type:0,value:"Zurück zu Statistiken"}],SOURCE_BREAKDOWN:[{type:0,value:"Quellübersicht"}],ALL_PHOTO_AND_VIDEOS_LINK:[{type:0,value:"Alle Fotos und Videos"}],VISITS:[{type:0,value:"Besuche"}],PRO_UNTIL_DATE:[{type:0,value:"PRO bis "},{type:1,value:"date"}],PRO_SINCE_DATE:[{type:0,value:"PRO seit "},{type:1,value:"date"}],PRO_SINCE_MONTHYEAR:[{type:0,value:"PRO seit "},{type:3,value:"intlDate",style:"monthYear"}],PRO_UNTIL_MONTHYEAR:[{type:0,value:"PRO bis "},{type:3,value:"intlDate",style:"monthYear"}],LEARN_MORE:[{type:0,value:"Weitere Infos"}],CURRENT_STATS_DATE:[{type:0,value:"Statistiken werden in GMT angezeigt, dort ist es aktuell "},{type:1,value:"time"},{type:0,value:" am "},{type:1,value:"date"}],CURRENT_STATS_LONGDATE:[{type:0,value:"Statistiken werden in GMT angezeigt, dort ist es aktuell "},{type:1,value:"time"},{type:0,value:" am "},{type:3,value:"intlDate",style:"long"}],SPACE_USED_LIMITED:[{type:1,value:"used"},{type:0,value:" von "},{type:1,value:"total"},{type:0,value:" verwendet"}],SPACE_USED_UNLIMITED:[{type:1,value:"used"},{type:0,value:" von unbegrenzt verwendet"}],PUBLIC:[{type:0,value:"Öffentlich"}],FRIENDS:[{type:0,value:"Freunde"}],FAMILY:[{type:0,value:"Familie"}],FF:[{type:0,value:"Freunde und Familie"}],PRIVATE:[{type:0,value:"Privat"}],TAGGED:[{type:0,value:"Mit Tag versehen"}],GEOTAGGED:[{type:0,value:"Mit Geo-Tag versehen"}],IN_ALBUMS:[{type:0,value:"In Alben"}],IN_GROUPS:[{type:0,value:"In Gruppen"}],VIEWED:[{type:0,value:"Angezeigt"}],FAVED:[{type:0,value:"Favorisiert"}],COMMENTED:[{type:0,value:"Kommentiert"}],NO_SOURCES_TODAY:[{type:0,value:"Keine Quellen für diesen Tag"}],NO_VIEWS_TODAY:[{type:0,value:"Heute wurden keine Fotos angezeigt"}],PERCENTAGE_OF_VIEWS:[{type:2,value:"num",style:null},{type:0,value:" % der Aufrufe"}],PERCENTAGE_OF_FAVES:[{type:2,value:"num",style:null},{type:0,value:" % der Favoriten"}],PERCENTAGE_OF_COMMENTS:[{type:2,value:"num",style:null},{type:0,value:" % der Kommentare"}],TODAY:[{type:0,value:"Heute"}],SOURCES:[{type:0,value:"Quellen"}],LOAD_MORE:[{type:0,value:"Mehr laden"}],NEXT:[{type:0,value:"Weiter"}],PREVIOUS:[{type:0,value:"Zurück"}],MEDIA:[{type:0,value:"Medien"}],VISIBILITY:[{type:0,value:"Sichtbarkeit"}],ALPHA_LABEL:[{type:0,value:"Statistiken Alpha"}],BETA_LABEL:[{type:0,value:"Statistiken Beta"}],SHOW_ALL:[{type:0,value:"Alle anzeigen"}],PHOTO_STATS:[{type:0,value:"Fotostatistiken"}],EXPAND_ALL:[{type:0,value:"Alle einblenden"}],COLLAPSE_ALL:[{type:0,value:"Alle ausblenden"}],NO_PHOTO_STATS_AVAILABLE:[{type:0,value:"Für dieses Foto sind keine Statistiken verfügbar"}],NO_RECENT_PHOTO_STATS_AVAILABLE:[{type:0,value:"Für dieses Foto sind keine aktuellen Statistiken verfügbar"}],WELCOME_TO_STATS:[{type:0,value:"Willkommen bei den Statistiken"}],WELCOME_MODAL_SCREEN_1:[{type:0,value:"Alle Zeitdaten ganz einfach anzeigen"}],WELCOME_MODAL_SCREEN_2:[{type:0,value:"Verbesserte Navigation"}],WELCOME_MODAL_SCREEN_3:[{type:0,value:"Noch aussagekräftigere Daten sowie mehr Kategorien und Social-Media-Quellen"}],WELCOME_MODAL_SCREEN_2_QUICK:[{type:0,value:"Die verbesserte Navigation ermöglicht dir einen schnellen Zugriff auf deine Daten"}],WORKING_ON_IT:[{type:0,value:"Wir arbeiten daran"}],STATS_LOADING:[{type:0,value:"Bei der Anzeige der Statistiken sind Probleme aufgetreten. Versuche es bitte noch einmal."}],"404_STATS_ONLY_YOU":[{type:0,value:"Sie können die Statistiken anderer Personen nicht einsehen."}],GET_STATS_ACCESS:[{type:0,value:"Erhalte mit Flickr Pro Zugriff auf detaillierte Statistiken"}],STATS_FEATURES:[{type:0,value:"Finde heraus, welche deiner Fotos aktuell beliebt sind und welche seit Bestehen deines Flickr Pro Kontos am besten abgeschnitten haben."}],IN_DANGER_OF_LOSING_PRO:[{type:0,value:'You are in danger of losing your Pro account. <a href="'},{type:1,value:"url"},{type:0,value:'">Learn More</a>.'}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-comments_de-de",(function(e,n){e.Intl.add("hermes/comments","de-DE",{LOADING:[{type:0,value:"Wird geladen"}],MORE:[{type:0,value:"mehr"}],ERROR_LOADING_COMMENTS:[{type:0,value:"Fehler beim Laden der Kommentare"}],COULDNT_POST_COMMENT:[{type:0,value:"Wir konnten deinen Kommentar nicht posten."}],COULDNT_GET_MORE_COMMENTS:[{type:0,value:"Wir konnten keine weiteren Kommentare finden"}],CONFIRM_DELETE:[{type:0,value:"Löschen bestätigen"}],YES_CONFIRM_DELETE:[{type:0,value:"Ja, löschen"}],ARE_YOU_SURE_DELETE:[{type:0,value:"Willst du diesen Kommentar wirklich löschen?"}],COULDNT_DELETE_COMMENT:[{type:0,value:"Wir konnten deine Kommentar nicht löschen."}],ERROR:[{type:0,value:"Fehler!"}],NO_COMMENTS:[{type:0,value:"Keine Kommentare"}],ADD_A_COMMENT:[{type:0,value:"Kommentar hinzufügen"}],LOGIN_TO_COMMENT:[{type:0,value:"Anmelden, um einen Kommentar abzugeben"}],MUST_BE_LOGGED_IN_TO_COMMENT:[{type:0,value:"Du musst angemeldet sein, um einen Kommentar zu posten."}],LOADING_COMMENTS:[{type:0,value:"Kommentare werden geladen ..."}],SEE_MORE:[{type:0,value:"Mehr sehen"}],SEE_MORE_LINK:[{type:0,value:'... <a href="'},{type:1,value:"photoUrl"},{type:0,value:'">Weitere Infos</a>'}],SIGNUP_MODAL_TITLE:[{type:0,value:"Gib einen Kommentar für dieses Foto ab!"}],SIGNUP_MODAL_MESSAGE:[{type:0,value:"Registriere dich bei Flickr, um für dieses Foto einen Kommentar abzugeben"}],VIEW_COMMENTS:[{type:0,value:"Kommentare anzeigen"}],COMMENTING_DISABLED:[{type:0,value:"Die Kommentarfunktion ist für dieses Foto deaktiviert."}],VIEW_ON_PHOTO_PAGE:[{type:0,value:"Alle Kommentare auf der Fotoseite anzeigen"}],ADD_GALLERY_COMMENT:[{type:0,value:"Einen Kommentar zu dieser Galerie hinzufügen"}],ADD_PHOTO_COMMENT:[{type:0,value:"Füge einen Kommentar zu diesem "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"Foto"}]},video:{value:[{type:0,value:"Video"}]},other:{value:[{type:0,value:"Foto"}]}}},{type:0,value:" hinzu"}],SELECT_EMOJI:[{type:0,value:"Wählen Sie ein Emoji"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("comment-list-view",(function(e,t){var n=require("hermes-core/flog")(t);e.namespace("Views")["comment-list-view"]=e.Base.create("comment-list-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.commentsViewHelper=e.commentListConfig.commentsViewHelper,this.config=this.commentsViewHelper.config.commentListConfig,this.modelConfig=this.config.modelConfig,this.isSubjectOwner=!1},loadState:function(){return this.commentsViewHelper.load()},activate:function(){var e=this,t=this.get("container");return t.addClass("comment-list-view"),this.commentsListNode=t.one(".comment-list"),this.registerEventHandler(this.commentsListNode.delegate("click",this.handleCommentActionClick.bind(this),".comment-actions")),this.loadComments().then((function(){e.commentsViewHelper.commentsObj.permalinkHash&&e.jumpToPermalink()}))},resetComments:function(){return this.commentsViewHelper.reset(),this.commentsListNode.set("innerHTML",""),this.loadComments()},loadComments:function(){var t=this;t.appContext.getViewer().nsid,t.appContext.getViewer().signedIn;return this.commentsViewHelper.loadComments().then((function(e){return t.getComments()})).then((function(){return t.handleLoadCommentsComplete(),e.Promise.resolve()})).catch((function(e){n.error("Error getting info",{err:e})}))},getComments:function(){var t=this;return this.commentsViewHelper.commentsObj.endOfComments?e.Promise.resolve():(this.isFetchingComments=!0,this.commentsViewHelper.getMoreComments().then((function(e){return t.updateComments(e)})).then((function(){t.isFetchingComments=!1})).catch((function(e){n.error("Error getting comments",{err:e}),t.isFetchingComments=!1})))},getMoreComments:function(){var t=this;return this.commentsViewHelper.commentsObj.endOfComments?e.Promise.resolve():(this.showCommentLoading(!0),this.getComments().then((function(){t.showCommentLoading(!1)})))},showBalls:function(t){this.balls||(this.balls=e.Node.create('<li class="loading-balls"></li>'),this.balls.setHTML(this.templates("flickr-balls")({}))),t?(this.balls.addClass("bottom"),this.commentsListNode.append(this.balls)):this.commentsListNode.prepend(this.balls)},hideBalls:function(){this.balls&&(this.balls.removeClass("bottom"),this.balls.remove())},appendNewComment:function(t){var n=this,i={appContext:this.appContext,comment:t.toJSON(),commentsViewHelper:this.commentsViewHelper},o=new e.Views["comment-item-view"](i);o.initialize(i).then((function(){o.activate()})).then((function(){var t=e.Node.create('<li class="comment-list-item"></li>');t.append(o.get("container")),n.commentsListNode.append(t),n.showCommentAddLoading(!1)})).then((function(){n.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+e.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:e.config.flickr.urls.assetRoot+"/images/joypixels",container:n.get("container").getDOMNode()}),n.handleCommentViewAppended(o)}))},handleCommentActionClick:function(e){var t=e.target,n=t.ancestor(".comment-item"),i=n.getAttribute("data-id"),o={};if(t.ancestor(".comment-action-menu-button",!0)){let e=t.ancestor(".comment-action-menu-button",!0);o.menuType=e.getAttribute("data-menutype"),o.permalink=e.getAttribute("data-permalink"),o.pathAlias=e.getAttribute("data-pathalias"),this.showCommentActionMenu(i,n,o)}},showCommentActionMenu:function(t,n,i){var o=this,s=[];"owner"!==i.menuType&&this.commentsViewHelper.commentsObj.commentingEnabled&&s.push({text:this.intlMessage({intlName:"photo-page-scrappy.REPLY"}),value:"reply-comment-action"}),(this.commentsViewHelper.commentsObj.isSubjectOwner||"owner"===i.menuType)&&s.push({text:this.intlMessage({intlName:"common.DELETE"}),value:"delete-comment-action"}),"owner"===i.menuType&&s.push({text:this.intlMessage({intlName:"common.EDIT"}),value:"edit-comment-action"}),this.commentsViewHelper.config.commentListConfig.showPermalinks&&s.push({text:this.intlMessage({intlName:"photo-page-scrappy.PERMALINK"}),value:"permalink-comment-action",href:i.permalink}),0!==s.length&&(n.addClass("active"),this.commentActionMenu||(this.commentActionMenu=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnActionClick:!0,showDropArrow:!0,anchorElement:n.one(".comment-action-menu-button"),classList:"over-modal comment-action-menu",overlayClassList:"over-modal",menuItems:s}),this.commentActionMenu.show(),this.registerEventHandler(this.commentActionMenu.on("closeDroparound",(function(e){n.removeClass("active"),o.commentActionMenu=null}))),this.registerEventHandler(this.commentActionMenu.on("selected",(e=>{switch(this.commentActionMenu.close(),e.menuItem.value){case"reply-comment-action":this.fire("subviewViewEvent",{eventName:"replyClicked",pathAliasOrNSID:i.pathAlias});break;case"delete-comment-action":this.deleteComment(t,n);break;case"edit-comment-action":this.showEditComment(t,n)}})))))},deleteComment:function(t,n){this.showDeleteConfirmation(t,n).then((e=>{e&&(this.fire("subviewViewEvent",{eventName:"commentDeleted",commentModelId:t}),n.ancestor("li").remove())})).catch((()=>{new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"common.OOPS"}),htmlMessage:this.intlMessage({intlName:"photo-page-scrappy.COMMENT_DELETE_ERROR"}),showCancelButton:!1}),hasSubviewConfigRefactor:!0}).show()}))},showDeleteConfirmation:function(t,n){return new Promise(((n,i)=>{let o=new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"photo-page-scrappy.DELETE_COMMENT"}),htmlMessage:this.intlMessage({intlName:"photo-page-scrappy.COMMENT_DELETE_CONFIRMATION"}),confirmButtonIsDangerous:!0,onConfirm:async(e,o)=>(o.setLoading(!0),this.commentsViewHelper.deleteComment(t).then((()=>{n(!0)})).catch((e=>{i()})))}),hasSubviewConfigRefactor:!0}).show();this.registerEventHandler(o.on("close",(()=>{n(!1)})))}))},showEditComment:function(t,i){var o=i.one(".content-container"),s=o.one(".comment-content");if(!this.isEditingComment)return this.isEditingComment=!0,this.commentsViewHelper.commentsObj.commentModelRegistry.get(t).then((i=>{var o=s.get("offsetHeight");return this.appContext.getView("edit-comment-view",{commentModel:i,contentHeight:o,onCancel:async(e,t)=>{s.show(),this.isEditingComment=!1},onSubmit:async(o,m)=>this.updateComment(t,o.value,s).then((()=>{s.set("innerHTML",i.getValue("contentSecure")),s.show(),this.isEditingComment=!1,this.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+e.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:e.config.flickr.urls.assetRoot+"/images/joypixels",container:this.get("container").getDOMNode()})})).catch((e=>{n.error("Error editing comment",{err:e}),s.show(),this.isEditingComment=!1}))})})).then((async e=>{s.hide(),await e.initialize(),o.append(e.get("container")),await e.normalizedActivate()}))},updateComment:function(e,t){return this.updateCommentCall(e,t)},updateCommentCall:function(e,t){var n=this;return this.commentsViewHelper.updateComment(e,t).then((function(t){return n.fire("subviewViewEvent",{eventName:"commentUpdated",commentModelId:e}),t}))},setLoading:function(e){this.isLoading=e},updateComments:function(e){},handleCommentViewAppended:function(){},showCommentLoading:function(){},showCommentAddLoading:function(){},jumpToPermalink:function(){var t,n=e.config.win.location.hash,i=this.get("container");"#comments"===n?e.AnchorRepositioner.jumpTo(i):(t=i.one(n))?(e.AnchorRepositioner.jumpTo(t),t.addClass("permalinked-comment")):new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"common.OOPS"}),htmlMessage:this.intlMessage({intlName:"photo-page-scrappy.COMMENT_PERMALINK_ERROR"}),showCancelButton:!1}),hasSubviewConfigRefactor:!0}).show()}})}),"@VERSION@",{requires:["flickr-view","comment-item-view"],optionalRequires:["hermes-core"],langBundles:["gallery","stats","comments","common","photo-page-scrappy"]});YUI.add("hermes-template-scrollable-comment-list-view",(function(e,t){var l=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,l,n,a){var s=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-list-container loading">\n\t<ol class="comment-list">\n\t</ol>\n\t<div class="loading-text">'+r((o(l,"intlMessage")||t&&o(t,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"comments.LOADING_COMMENTS"},data:a,loc:{start:{line:4,column:27},end:{line:4,column:79}}}))+'</div>\n\t<div class="no-comments-text">'+r((o(l,"intlMessage")||t&&o(t,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"comments.NO_COMMENTS"},data:a,loc:{start:{line:5,column:31},end:{line:5,column:78}}}))+"</div>\n</div>"},useData:!0}),n={};e.Array.each([],(function(t){var l=e.Template.get("hermes/"+t);l&&(n[t]=l)})),e.Template.register("hermes/scrollable-comment-list-view",(function(t,a){return(a=a||{}).partials=a.partials?e.merge(n,a.partials):n,l(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("scrollable-comment-list-view",(function(e,t){var s=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create(this.name,e.Views["comment-list-view"],[],{langBundles:this.details.langBundles,initializer:function(e){this.constructor.superclass.initializer.call(this,e)},loadState:function(){var e=this;return e.appContext.getModel(e.modelConfig.listRegistryName,{id:this.modelConfig.modelId}).then((function(t){e.commentListModel=t})).catch((function(e){throw s.error("Error getting comment list info",{err:e}),e}))},buildContainer:function(){this.setContainerWithTemplate("scrollable-comment-list-view",this.params)},activate:function(){var e=this.get("container");this.listContainerNode=e.one(".comment-list-container"),this.scrollableEl=this.listContainerNode.getDOMNode(),this.registerEventHandler(this.commentListModel.on("valuesChanged",this.handleCommentListChange.bind(this),!0)),this.constructor.superclass.activate.call(this)},handleCommentListChange:function(e){0===e.comments.newVal.getList().length?this.showNoCommentsMessage():this.listContainerNode.removeClass("no-comments")},showNoCommentsMessage:function(){var e=this;this.listContainerNode.addClass("no-comments"),setTimeout((function(){e.fire("subviewViewEvent",{eventName:"emptyCommentContainer"})}),300)},getNumOfComments:function(){return this.commentListModel.getValue(this.modelConfig.collectionName).getList().length},setLoading:function(e){this.isLoading=e,this.listContainerNode.toggleClass("loading",e)},handleLoadCommentsComplete:function(){this.listContainerNode.removeClass("loading"),0===this.getNumOfComments()&&this.showNoCommentsMessage(),this.scrollableEl.scrollTop=this.scrollableEl.scrollHeight,this.registerEventHandler(this.listContainerNode.on("scroll",this.handleCommentsScroll.bind(this)))},appendNewComment:function(e){0===this.getNumOfComments()&&this.listContainerNode.removeClass("no-comments"),this.constructor.superclass.appendNewComment.call(this,e)},handleCommentsScroll:function(e){!this.isFetchingComments&&this.scrollableEl.scrollTop<=0&&this.getMoreComments()},showCommentLoading:function(e){e?this.showBalls(!1):this.hideBalls()},showCommentAddLoading:function(e){e?(this.showBalls(!0),this.scrollableEl.scrollTop=this.scrollableEl.scrollHeight):this.hideBalls()},handleCommentViewAppended:function(e){this.scrollableEl.scrollTop=this.scrollableEl.scrollHeight},updateComments:function(t){return t?this.prependComments(t):e.Promise.resolve()},prependComments:function(t){var s=[],o=[];return t.forEach((t=>{var i={appContext:this.appContext,comment:t.toJSON(),commentsViewHelper:this.commentsViewHelper},n=new e.Views["comment-item-view"](i),l=n.initialize(i).then((function(){n.activate()}));o.push(n),s.push(l)})),e.Promise.all(s).then((()=>{this.prependCommentViewsToDom(o)}))},prependCommentViewsToDom:function(t){var s,o=this,i=this.scrollableEl,n=i.scrollHeight,l=i.scrollTop;t.forEach((function(t){(s=e.Node.create('<li class="comment-list-item"></li>')).append(t.get("container")),o.commentsListNode.prepend(s)})),this.commentsViewHelper.commentsObj.flimojiParser.emojifyTarget({inputElements:["["+e.config.flickr.emojis.parserAttr+"]"],useSprites:!1,iconsPath:e.config.flickr.urls.assetRoot+"/images/joypixels",container:this.get("container").getDOMNode()}),i.scrollTop=i.scrollHeight-n+l}})}),"@VERSION@",{requires:["flickr-view","comment-list-view","hermes-template-scrollable-comment-list-view"],optionalRequires:["hermes-core"],langBundles:["common","comments","photo-page-scrappy"]});YUI.add("hermes-template-standard-comment-list-view",(function(e,t){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,a,n,l){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,i=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="comment-list-container loading">\n\t<a role="button" class="load-more-button">'+i("function"==typeof(o=null!=(o=c(a,"loadMoreText")||(null!=t?c(t,"loadMoreText"):t))?o:r)?o.call(s,{name:"loadMoreText",hash:{},data:l,loc:{start:{line:2,column:43},end:{line:2,column:59}}}):o)+'</a>\n\t<ol class="comment-list">\n\t</ol>\n\t<div class="loading-text">'+i((c(a,"intlMessage")||t&&c(t,"intlMessage")||r).call(s,{name:"intlMessage",hash:{intlName:"comments.LOADING_COMMENTS"},data:l,loc:{start:{line:5,column:27},end:{line:5,column:79}}}))+"</div>\n</div>"},useData:!0}),n={};e.Array.each([],(function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)})),e.Template.register("hermes/standard-comment-list-view",(function(t,l){return(l=l||{}).partials=l.partials?e.merge(n,l.partials):n,a(t,l)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});